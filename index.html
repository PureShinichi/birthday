<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HAPPY BIRTHDAY SAYANGG!! — Tihah Sayang</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg-dark:#1a0a0f;
  --romance-red:#ff2d55;
  --romance-pink:#ff7eb9;
  --romance-gold:#ffd700;
  --light-pink:#ffb6c1;
  --heart-color:#ff2d55;
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:'Poppins',sans-serif;overflow:hidden;background:var(--bg-dark);color:#fff;}
body{position:relative;}

/* Sections */
.section{position:absolute;inset:0;display:none;justify-content:center;align-items:center;flex-direction:column;overflow:hidden;}
.active{display:flex;}

/* Background animated gradient */
.bg-gradient{
  position:absolute;inset:0;
  background:linear-gradient(135deg,#1a0a0f,#33021f,#1a0a0f);
  animation:bgShift 20s linear infinite;
  z-index:0;
}
@keyframes bgShift{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* Floating particles */
.particle{position:absolute;border-radius:50%;opacity:0.6;pointer-events:none;}
canvas#hearts{position:absolute;inset:0;pointer-events:none;z-index:2;}
.text-layer{position:absolute;inset:0;pointer-events:none;z-index:3;}
.fallText{position:fixed;font-size:18px;font-weight:900;white-space:nowrap;text-shadow:0 0 10px rgba(255,255,255,0.08);pointer-events:none;will-change:transform;opacity:0.95;}

/* Card / content containers */
.card{position:relative;z-index:10;padding:20px 30px;border-radius:18px;text-align:center;max-width:900px;}
h1,h2,h3{margin-bottom:12px;}
.big-love{font-size:clamp(48px,12vw,140px);font-weight:900;color:var(--romance-red);text-shadow:0 0 12px var(--romance-pink);}
.sub-lines{margin-top:12px;display:flex;flex-direction:column;gap:8px;align-items:center;}
.sub-lines .line{font-weight:800;text-transform:uppercase;opacity:0.95;color:var(--romance-pink);}

/* Buttons */
button{
  font-family:'Poppins',sans-serif;
  border:none;border-radius:14px;cursor:pointer;font-weight:700;padding:12px 30px;margin-top:18px;
  color:#001;background:linear-gradient(90deg,var(--romance-pink),var(--romance-red));
  box-shadow:0 8px 20px rgba(255,44,223,0.2);
  transition:all 0.3s ease;
}
button:hover{transform:scale(1.1);box-shadow:0 12px 32px rgba(255,44,223,0.4);}
button:active{transform:scale(0.97);}

/* Fade in/out animations */
.fadeIn{animation:fadeIn 1s forwards;}
.fadeOut{animation:fadeOut 1s forwards;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
@keyframes fadeOut{from{opacity:1;}to{opacity:0;transform:translateY(-20px);}}

/* Typewriter cursor */
#typedText::after{content:'|';animation: blink 0.8s steps(1) infinite;color:var(--romance-pink);}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:0;}}


/* Confetti Section */
.confetti{position:absolute;inset:0;pointer-events:none;z-index:5;}
.confetti-piece{position:absolute;width:10px;height:10px;background:var(--romance-pink);opacity:0.9;transform:rotate(45deg);}

/* Gallery */
.gallery{display:flex;flex-wrap:wrap;justify-content:center;gap:28px;margin-top:18px;}
.gallery img{width:280px;height:180px;object-fit:cover;border-radius:16px;border:3px solid var(--romance-pink);box-shadow:0 8px 40px rgba(255,44,223,0.2);transition: transform 0.4s ease, box-shadow 0.4s ease;cursor:pointer;}
.gallery img:hover{transform:scale(1.08) rotate(-2deg);box-shadow:0 12px 48px rgba(255,44,223,0.3);}
</style>
</head>
<body>

<div class="bg-gradient"></div>
<canvas id="hearts"></canvas>
<div class="text-layer" id="textLayer"></div>

<!-- SECTION 1: START -->
<div class="section active" id="section1">
  <div class="card fadeIn">
    <h1 class="big-love">HI SAYANG! ♥</h1>
    <button id="startBtn">START</button>
  </div>
</div>

<!-- SECTION 2: NOTES WITH TYPEWRITER -->
<div class="section" id="section2">
  <div class="card fadeIn">
    <h2>To My Beloved</h2>
    <p id="typedText"></p>
    <div id="flower"></div>
    <button class="nextBtn">Next</button>
  </div>
</div>

<!-- SECTION 3: GALLERY -->
<div class="section" id="section3">
  <div class="card fadeIn">
    <h2>Gambarrrr <3</h2>
    <div class="gallery">
      <img src="assets/image1.jpg" alt="Image 1">
      <img src="assets/image2.jpg" alt="Image 2">
      <img src="assets/image3.jpg" alt="Image 3">
    </div>
    <button class="nextBtn">Next</button>
  </div>
</div>

<!-- SECTION 4: VIDEO BIGGER -->
<div class="section" id="section4">
  <div class="card fadeIn">
    <h2>Hihi <3</h2>
    <video controls src="assets/video.mp4" style="max-width:95%;width:95%;height:auto;min-height:400px;border-radius:16px;box-shadow:0 10px 60px rgba(255,44,223,0.38);"></video>
    <button class="nextBtn">Last!</button>
  </div>
</div>

<!-- SECTION 5: HAPPY BIRTHDAY BLAST -->
<div class="section" id="section5">
  <div class="card fadeIn">
    <h1 class="big-love">HAPPY BIRTHDAY SAYANGG!!!</h1>
    <button id="celebrateBtn">CLICK HERE ❤️</button>
  </div>
  <div class="confetti" id="confettiContainer"></div>
</div>

<!-- AUDIO -->
<audio id="bgMusic" src="assets/monokrom.mp3" loop preload="auto"></audio>
<audio id="typeSound" src="https://www.soundjay.com/typing/keyboard-1.mp3" preload="auto"></audio>
<audio id="buttonSound" src="https://www.soundjay.com/button/sounds/button-16.mp3" preload="auto"></audio>
<audio id="confettiSound" src="https://www.soundjay.com/misc/sounds/bell-ringing-01.mp3" preload="auto"></audio>

<script>
// BUTTON CLICK SOUND
const buttonSound = document.getElementById('buttonSound');
document.querySelectorAll('button').forEach(b=>{
  b.addEventListener('click',()=>{buttonSound.currentTime=0; buttonSound.play();});
});

// TYPEWRITER
const romanticText = `My dearest love, on this special day, I want to tell you that my heart beats for you endlessly. 
From the moment you came into my life, everything became brighter, sweeter, and more meaningful. 
You are my sunshine, my laughter, my forever happiness. I promise to cherish you, adore you, and love you more every single day. 
Happy birthday, my beloved Tihah Sayang! May all your dreams come true, and may we continue to create countless beautiful memories together. 
You are my everything, and I am endlessly grateful for you.`;
const typedTextEl = document.getElementById('typedText');
const typeSound = document.getElementById('typeSound');
let idx = 0;
function typeWriter(){
  if(idx < romanticText.length){
    typedTextEl.innerHTML += romanticText[idx] === "\n" ? "<br>" : romanticText[idx];
    if(romanticText[idx]!==" " && romanticText[idx]!=="\n"){typeSound.currentTime=0; typeSound.play().catch(()=>{});}
    idx++;
    setTimeout(typeWriter, 35);
  } else {
    document.getElementById('').style.transform='translateX(-50%) scale(1)';
  }
}

// NAVIGATION
let currentSection=1;
function showSection(num){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById('section'+num).classList.add('active');
}
document.getElementById('startBtn').addEventListener('click',()=>{
  localStorage.setItem('musicPlaying','true'); document.getElementById('bgMusic').play().catch(()=>{}); musicChannel.postMessage({cmd:'play'});
  showSection(2); typeWriter();
});
document.querySelectorAll('.nextBtn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    currentSection++;
    if(currentSection>5)currentSection=5;
    showSection(currentSection);
    if(currentSection===2) typeWriter();
  });
});

// BACKGROUND HEARTS
const canvas = document.getElementById('hearts');
const ctx = canvas.getContext('2d');
let W = innerWidth, H = innerHeight;
function resizeCanvas(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight; }
window.addEventListener('resize',resizeCanvas); resizeCanvas();
class Heart{constructor(){this.reset();} reset(){this.x=Math.random()*W;this.y=Math.random()*-H;this.vy=Math.random()*2+0.5;this.vx=Math.random()*0.4-0.2;this.size=Math.random()*20+10;this.angle=Math.random()*Math.PI*2;this.spin=Math.random()*0.02-0.01;this.color=Math.random()<0.5?'rgba(255,44,223,0.7)':'rgba(255,45,85,0.7)';} step(){this.x+=this.vx;this.y+=this.vy;this.angle+=this.spin;if(this.y>H+30)this.reset();} draw(ctx){ctx.save();ctx.translate(this.x,this.y);ctx.rotate(this.angle);ctx.beginPath();const s=this.size/10;ctx.moveTo(0,-s*10);ctx.bezierCurveTo(s*8,-s*16,s*20,-s*4,0,s*6);ctx.bezierCurveTo(-s*20,-s*4,-s*8,-s*16,0,-s*10);ctx.closePath();ctx.fillStyle=this.color;ctx.fill();ctx.restore();}}
const hearts=[];for(let i=0;i<100;i++)hearts.push(new Heart());
function animateHearts(){ctx.clearRect(0,0,W,H);hearts.forEach(h=>{h.step();h.draw(ctx);});requestAnimationFrame(animateHearts);}
animateHearts();

// FALLING TEXT
const textLayer=document.getElementById('textLayer');
const phrases=["♡"];
let activeTexts=0; const MAX_ACTIVE=50;
function spawnFallingText(){
  activeTexts++;
  const el=document.createElement('div'); el.className='fallText'; el.textContent=phrases[Math.floor(Math.random()*phrases.length)];
  el.style.left=(Math.random()*80)+'vw'; el.style.top=(-6-Math.random()*6)+'vh'; el.style.fontSize=(Math.random()*14+18)+'px';
  el.style.opacity=Math.random()*0.4+0.6; el.style.color=Math.random()<0.5?'var(--romance-red)':'var(--romance-pink)';
  const duration=Math.random()*5+5;
  el.style.transition=`transform ${duration}s linear, opacity ${duration}s linear`;
  textLayer.appendChild(el);
  requestAnimationFrame(()=>{el.style.transform=`translateY(${window.innerHeight+200}px)`;});
  setTimeout(()=>{ el.remove(); activeTexts=Math.max(0,activeTexts-1);}, (duration*1000)+200);
}
setInterval(()=>{if(activeTexts<MAX_ACTIVE)spawnFallingText();},300);

// MUSIC CHANNEL
const bgMusic=document.getElementById('bgMusic'); bgMusic.volume=0.35;
if(localStorage.getItem('musicPlaying')==='true'){bgMusic.play().catch(()=>{});}
const musicChannel=new BroadcastChannel('music_channel');
musicChannel.onmessage=(e)=>{if(e.data.cmd==='play')bgMusic.play().catch(()=>{});if(e.data.cmd==='pause')bgMusic.pause();}
window.addEventListener('beforeunload',()=>{musicChannel.postMessage({cmd:'origin_closed'});});

// SECTION 5 CONFETTI
const confettiContainer=document.getElementById('confettiContainer');
const confettiSound=document.getElementById('confettiSound');
document.getElementById('celebrateBtn').addEventListener('click',()=>{
  confettiSound.play();
  for(let i=0;i<150;i++){
    const c=document.createElement('div'); c.className='confetti-piece';
    c.style.backgroundColor=i%2===0?'#ff2d55':'#ff7eb9';
    c.style.left=Math.random()*window.innerWidth+'px';
    c.style.top=-Math.random()*50+'px';
    confettiContainer.appendChild(c);
    animateConfetti(c);
  }
});
function animateConfetti(c){
  const duration=Math.random()*3000+2000;
  const x=Math.random()*200-100;
  const y=window.innerHeight+50;
  c.animate([{transform:'translate(0,0) rotate(0deg)',opacity:1},{transform:`translate(${x}px,${y}px) rotate(${Math.random()*720}deg)`,opacity:0}],{duration:duration,iterations:1,easing:'ease-out'});
  setTimeout(()=>{c.remove();},duration);
}
</script>
</body>
</html>

